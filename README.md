
# Dullahan


## Overview

A Dullmahan comes from the Irish mythology, and is depicted as a headless knight riding a black horse, holding its own head in its hand. This product is the newest member of the Paladin round table, and is aimed to use the best synergy betwenn stkAAVE, GHO & vote lending, the image of a ghost knight is the best incarnation of it.

Dullahan is the next evolution of the palStkAave, aiming to supercharge the staked AAVE token.  
The Dullahan vault will allow users to deposit their stkAAVE tokens to get the best yield from it,
through different mechanisms:
- claim & auto-compound rewards from the Safety Module
- any yield coming from vote lending or voting incentives around the Aave Governance
- yield from users looking to lend stkAAVE to harness the GHO interest rate discount coming from stkAAVE
  
Any reward in AAVE, coming from the Safety Module claim or any other source, will always be staked again
into stkAAVE, to allow to auto-compound the yield and get Safety Module yield on a higher total amount,
while participating in securing the Aave protocol by increasing the size of the Safety Module.  
The Vault will also allow users looking to mint GHO to open sub-vaults, and rent stkAAVE, allowing them to deposit their collateral and borrow GHO from the Aave market through the sub-vault with the best interest rate discount they can get. After a given period, all the stkAAVE that not necessary to achieve total interest rate discount can be clawed back into the main Vault, only leaving the exact amount of stkAAVE needed for the current borrow GHO amount. In the same logic, the sub-vault can also get more stkAAVE from the Vault to increase the amount of GHO borrowed (if the deposited collateral allows it). When the user GHO deabt is repayed (or when the user get liquidated), all stkAAVE are returned to the Vault. **put here stuff about fees/what the user renting stkAAVE will have to pay**
All the Governance power held by the vault & all the sub-vaults will always be delegated to a Governance Module, that can be a multisig, a chosen Delegate from the Aave governance, or a smart contract, allowing to have the best use of the Vault (& sub-vaults) global voting power, and harvest any incentive that could come from any source (paid vote delegation, voting incentives/bribes, purchase of Proposal power, ...)  
  
The Dullahan Vault uses the Scaling ERC20 logic (inspired by the Aave aToken) so 1 share is always equal to 1 stkAAVE, where the depositors balance will automatically increase based on the yield generated by the Vault. This system will also allow the deposited stkAAVE to have a liquid wrapper that is always equivalent to 1 AAVE, and to be used in DEX Stable Pools so stkAAVE LPs never lose on Safety Module yield when being liquidity providers.

 
![Dullahan diagram](misc/Dullahan_diagram.png?raw=true "Dullahan diagram")


## Deployed contracts

coming soon ... 


## Dependencies & Installation


To start, make sure you have `node` & `npm` installed : 
* `node` - tested with v16.4.0
* `npm` - tested with v7.18.1

Then, clone this repo, and install the dependencies : 

```
git clone https://github.com/PaladinFinance/Dullahan.git
cd Dullahan
npm install
```

This will install `Hardhat`, `Ethers v5`, and all the hardhat plugins used in this project.


## Contracts

coming soon ... 


## Tests

Tests can be found in the `./test` directory.

To run the tests : 
```
npm run test
```


## Deploy


Deploy to Mainnet :
```
npm run build
npm run deploy <path_to_deploy_script>
```


## Security & Audit


...


## Ressources


Website : [paladin.vote](https://.paladin.vote)

Documentation : [doc.paladin.vote](https://doc.paladin.vote)


## Community

For any question about this project, or to engage with us :

[Twitter](https://twitter.com/Paladin_vote)

[Discord](https://discord.com/invite/esZhmTbKHc)



## License


This project is licensed under the [MIT](https://github.com/PaladinFinance/Paladin-Evocations/blob/main/MIT-LICENSE.TXT) license


